{
  "name": "Taskwarrior Task",
  "scopeName": "text.taskwarrior.edit",
  "uuid": "14f1056a-e10f-4b7c-900e-41a5b78dcb5c",
  "patterns": [
    {
      "include": "#edit"
    }
  ],
  "repository": {
    "edit": {
      "patterns": [
        {
          "include": "#entryLine"
        },
        {
          "include": "#heading"
        },
        {
          "include": "#comment"
        },
        {
          "include": "#invalidIndentation"
        },
        {
          "include": "#missingSeparator"
        }
      ]
    },
    "attributeKeySection": {
      "match": "(?:(UDA)\\s)?([\\S^:#][^:#]+)\\s*(:)",
      "captures": {
        "1": {
          "name": "meta.keyword.uda keyword.other.uda strong.uda"
        },
        "2": {
          "name": "entity.other.attribute-name.task"
        },
        "3": {
          "name": "punctuation.separator.attribute-name.task"
        }
      }
    },
    "comment": {
      "match": "^((#)\\p{Print}*)$",
      "captures": {
        "1": {
          "name": "comment.line.task"
        },
        "2": {
          "name": "punctuation.definition.comment.task"
        }
      }
    },
    "entry": {
      "match": "([\\S^:#][^:#]+\\s*:)\\s*(.*)",
      "captures": {
        "1": {
          "name": "meta.section.key",
          "patterns": [
            {
              "include": "#attributeKeySection"
            }
          ]
        },
        "2": {
          "name": "meta.string.value",
          "patterns": [
            {
              "include": "#stringValue"
            }
          ]
        }
      }
    },
    "entryLine": {
      "match": "^\\s{2}([\\S^:#][^:#]+[^#]*)$",
      "captures": {
        "1": {
          "name": "meta.block.entry.task",
          "patterns": [
            {
              "include": "#entry"
            }
          ]
        }
      }
    },
    "heading": {
      "match": "^((#)\\s+((-+)|Name)\\s+((-+)|Editable details))$",
      "captures": {
        "1": {
          "name": "comment.line.with.heading.task"
        },
        "2": {
          "name": "punctuation.definition.comment.task"
        },
        "3": {
          "name": "markup.heading.name"
        },
        "4": {
          "name": "punctuation.separator.heading.name"
        },
        "5": {
          "name": "markup.heading.details"
        },
        "6": {
          "name": "punctuation.separator.heading.details"
        }
      }
    },
    "invalidIndentation": {
      "match": "(^\\s?[^#\\s][^:]*)|((?<=^\\s{2})\\P{Word}+)",
      "name": "invalid.illegal.indentation.task"
    },
    "missingSeparator": {
      "match": "(^[^:#]+(?=#))|(^[^:#]+$)",
      "name": "invalid.illegal.missing.separator.task"
    },
    "stringValue": {
      "match": ".*",
      "name": "string.value"
    }
  }
}
